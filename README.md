# Calc

# Calc (PyQt5)

**Calc** - це настільний графічний застосунок для автоматизованого парсингу та обчислення математичних виразів будь-якої складності. Програмне забезпечення реалізує власний алгоритм синтаксичного аналізу (Recursive Descent Parser), що дозволяє будувати абстрактне синтаксичне дерево (AST) та виконувати обчислення з урахуванням пріоритетів операцій без використання небезпечних функцій (типу `eval`).

## Функціональні можливості

*   **Власний парсер:** Реалізація повного циклу трансляції коду: Лексер (токенізація) → Парсер (AST) → Обчислювач.
*   **Підтримка пріоритетів:** Коректна обробка порядку дій (дужки, множення/ділення, додавання/віднімання, унарні оператори).
*   **Сучасний графічний інтерфейс (GUI):**
    *   Адаптивний дизайн на базі **PyQt5**.
    *   Підтримка **Темної** та **Світлої** тем оформлення.
    *   Стилізація елементів через **QSS** (Qt Style Sheets).
*   **Система історії:**
    *   Автоматичне збереження результатів у локальний файл JSON.
    *   Відновлення історії при наступному запуску програми.
*   **Захист від помилок:**
    *   Інтелектуальна обробка ділення на нуль.
    *   Виявлення синтаксичних помилок та вивід зрозумілих повідомлень користувачеві.
*   **Логування:** Запис усіх подій та помилок у файл `app.log` для діагностики.

## Архітектура та Опис модулів

Проєкт побудовано за модульним принципом із використанням патерну **Layered Architecture** (поділ на шари логіки, даних та представлення).

1.  **`main.py`**
    *   Точка входу в програму.
    *   Функції: Ініціалізація системи логування, створення екземпляра `QApplication`, запуск головного вікна інтерфейсу.

2.  **Пакет `core/` (Ядро обчислень)**
    *   Містить бізнес-логіку парсингу.
    *   **`lexer.py`:** Лексичний аналізатор. Розбиває вхідний рядок на потік токенів (`NUMBER`, `PLUS`, `LPAREN` тощо).
    *   **`parser.py`:** Синтаксичний аналізатор. Використовує метод рекурсивного спуску для побудови дерева. Містить методи `factor()`, `term()`, `expr()`.
    *   **`ast_nodes.py`:** Визначення класів вузлів дерева (`NumberNode`, `BinOpNode`, `UnaryOpNode`), кожен з яких має метод `evaluate()`.
    *   **`tokens.py`:** Перелік типів токенів (Enum).

3.  **Пакет `gui/` (Інтерфейс користувача)**
    *   Відповідає за візуалізацію.
    *   **`main_window.py`:** Головний клас вікна на PyQt5. Ініціалізація віджетів, логіка перемикання тем (`apply_theme`), обробка натискань кнопок та відображення модальних вікон помилок (`QMessageBox`).

4.  **Пакет `utils/` (Допоміжні сервіси)**
    *   Інфраструктурний шар.
    *   **`history.py`:** Менеджер історії. Відповідає за серіалізацію/десеріалізацію даних у формат JSON (`save`, `load`).
    *   **`logger.py`:** Налаштування формату та рівнів логування (консоль + файл).

## Інструкція зі встановлення та запуску

Для розгортання калькулятора на локальній машині виконайте наступні кроки:

### Крок 1. Клонування репозиторію
```bash
git clone https://github.com/YOUR_USERNAME/MathCalculator.git
cd MathCalculator
```

### Крок 2. Встановлення залежностей
```bash
pip install -r requirements.txt
```

### Крок 3. Запуск програми
```bash
python main.py
```
